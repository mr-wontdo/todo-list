(()=>{"use strict";const e=new class{constructor(){this.activeProjectIndex=null,this.activeTaskIndex=null,this.projectList=[]}setActiveProjectIndex(e){this.activeProjectIndex=e}setActiveTaskIndex(e){this.activeTaskIndex=e}addProject(e){this.projectList.push(new t(e))}addTask(e,t,n,s,i){this.projectList[this.activeProjectIndex].taskList.push(new c(e,t,n,s,i))}deleteProject(e){this.projectList.splice(e,1)}deleteTask(e,t){this.projectList[e].taskList.splice(t,1)}getTaskTitle(e,t){return this.projectList[e].taskList[t].title}getTaskDescription(e,t){return this.projectList[e].taskList[t].description}getTaskDueDate(e,t){return this.projectList[e].taskList[t].dueDate}getTaskPriority(e,t){return this.projectList[e].taskList[t].priority}getTaskComplete(e,t){return this.projectList[e].taskList[t].complete}setTaskTitle(e){this.projectList[this.activeProjectIndex].taskList[this.activeTaskIndex].title=e}setTaskDescription(e){this.projectList[this.activeProjectIndex].taskList[this.activeTaskIndex].description=e}setTaskDueDate(e){this.projectList[this.activeProjectIndex].taskList[this.activeTaskIndex].dueDate=e}setTaskPriority(e){this.projectList[this.activeProjectIndex].taskList[this.activeTaskIndex].priority=e}setTaskComplete(e){this.projectList[this.activeProjectIndex].taskList[this.activeTaskIndex].complete=e}};class t{constructor(e){this.title=e,this.taskList=[]}}class c{constructor(e,t,c,n,s){this.title=e,this.description=t,this.dueDate=c,this.priority=n,this.complete=s}}class n{static populateStorage(){localStorage.setItem("projects",JSON.stringify(e))}static retrieveStorage(){localStorage.getItem("projects")&&(Object.assign(e,JSON.parse(localStorage.getItem("projects"))),e.setActiveProjectIndex(null),e.setActiveTaskIndex(null))}}function s(){!function(){const t=document.querySelector(".project-list");t.textContent="";for(let c=0;c<e.projectList.length;c++){const i=document.createElement("button");i.textContent=e.projectList[c].title,i.addEventListener("click",(()=>{a(),e.setActiveProjectIndex(c),s()}));const o=document.createElement("button");o.style.visibility="hidden",o.addEventListener("click",(t=>{var i;t.stopPropagation(),e.deleteProject(c),i=c,e.activeProjectIndex<i||(e.activeProjectIndex>i?e.activeProjectIndex-=1:e.activeProjectIndex===i&&(e.activeProjectIndex=null)),n.populateStorage(),s()})),i.addEventListener("mouseenter",(()=>{o.removeAttribute("style")})),i.addEventListener("mouseleave",(()=>{o.style.visibility="hidden"})),t.appendChild(i),i.appendChild(o)}!function(){const e=document.querySelector(".project-list"),t=document.createElement("button");t.textContent="Add Project",t.addEventListener("click",(()=>{document.querySelector(".add-project").showModal()})),e.appendChild(t)}()}(),function(){const t=document.querySelector(".content");if(t.textContent="",null===e.activeProjectIndex)return;const c=document.createElement("h2");c.textContent=e.projectList[e.activeProjectIndex].title,t.appendChild(c);for(let c=0;c<e.projectList[e.activeProjectIndex].taskList.length;c++){const o=document.createElement("div"),a=document.createElement("div"),d=document.createElement("div"),r=document.createElement("p");r.textContent=e.getTaskTitle(e.activeProjectIndex,c),r.classList.add("title");const l=document.createElement("p");l.textContent=e.getTaskDescription(e.activeProjectIndex,c),l.classList.add("description");const u=document.createElement("p");u.textContent=p(e.getTaskDueDate(e.activeProjectIndex,c)),u.classList.add("due-date");const m=document.createElement("p");m.textContent=v(e.getTaskPriority(e.activeProjectIndex,c)),m.classList.add("priority"),m.classList.add(e.getTaskPriority(e.activeProjectIndex,c));const x=document.createElement("input");x.setAttribute("type","checkbox"),x.setAttribute("id","complete"),x.setAttribute("name","complete"),x.checked=e.getTaskComplete(e.activeProjectIndex,c),x.addEventListener("click",(()=>{e.setActiveTaskIndex(c);const t=!!x.checked;e.setTaskComplete(t,e.activeProjectIndex,e.activeTaskIndex),n.populateStorage(),e.setActiveTaskIndex(null),s()})),e.getTaskComplete(e.activeProjectIndex,c)&&(r.textContent=k(e.getTaskTitle(e.activeProjectIndex,c)),l.textContent=k(e.getTaskDescription(e.activeProjectIndex,c)));const h=document.createElement("button");h.textContent="✎",h.addEventListener("click",(()=>{e.setActiveTaskIndex(c),i(),document.querySelector(".edit-task").showModal()}));const T=document.createElement("button");T.textContent="🗑️",T.addEventListener("click",(()=>{e.deleteTask(e.activeProjectIndex,c),n.populateStorage(),s()})),t.appendChild(o),o.appendChild(a),o.appendChild(d),a.appendChild(r),a.appendChild(l),a.appendChild(u),a.appendChild(m),a.appendChild(x),d.appendChild(h),d.appendChild(T)}!function(){const e=document.querySelector(".content"),t=document.createElement("button");t.textContent="Add Task",t.addEventListener("click",(()=>{document.querySelector(".add-task").showModal()})),e.appendChild(t)}()}()}function i(){document.querySelector(".edit-task input#title").value=e.getTaskTitle(e.activeProjectIndex,e.activeTaskIndex),document.querySelector(".edit-task textarea#description").value=e.getTaskDescription(e.activeProjectIndex,e.activeTaskIndex),document.querySelector(".edit-task input#due_date").value=e.getTaskDueDate(e.activeProjectIndex,e.activeTaskIndex),document.querySelector(".edit-task select#priority").value=e.getTaskPriority(e.activeProjectIndex,e.activeTaskIndex)}!function(){const t=document.querySelector(".add-project"),c=document.querySelector(".add-project form");c.addEventListener("submit",(i=>{i.preventDefault(),e.addProject(document.querySelector(".add-project input#title").value),n.populateStorage(),t.close(),c.reset(),s()}))}(),function(){const t=document.querySelector(".add-task"),c=document.querySelector(".add-task form");c.addEventListener("submit",(i=>{i.preventDefault(),e.addTask(document.querySelector(".add-task input#title").value,document.querySelector(".add-task textarea#description").value,document.querySelector(".add-task input#due_date").value,document.querySelector(".add-task select#priority").value),n.populateStorage(),t.close(),c.reset(),s()}))}(),function(){const t=document.querySelector(".edit-task"),c=document.querySelector(".edit-task form");c.addEventListener("submit",(i=>{i.preventDefault(),e.setTaskTitle(document.querySelector(".edit-task input#title").value),e.setTaskDescription(document.querySelector(".edit-task textarea#description").value),e.setTaskDueDate(document.querySelector(".edit-task input#due_date").value),e.setTaskPriority(document.querySelector(".edit-task select#priority").value),e.setActiveTaskIndex(null),n.populateStorage(),t.close(),c.reset(),Object.values(o).includes(!0)?d():s()}))}(),document.querySelector(".add-project svg").addEventListener("click",(()=>{document.querySelector("dialog.add-project").close(),document.querySelector(".add-project > form").reset()})),document.querySelector(".add-task svg").addEventListener("click",(()=>{document.querySelector("dialog.add-task").close(),document.querySelector(".add-task > form").reset()})),document.querySelector(".edit-task svg").addEventListener("click",(()=>{document.querySelector("dialog.edit-task").close(),document.querySelector(".edit-task > form").reset()}));const o={isAllActive:null,isTodayActive:null,isWeekActive:null};function a(){for(const e in o)o[e]=null}function d(){const t=document.querySelector(".content");t.textContent="";const c=document.createElement("h2");!0===o.isAllActive&&(c.textContent="All Tasks"),!0===o.isTodayActive&&(c.textContent="Today's Tasks"),!0===o.isWeekActive&&(c.textContent="This Week's Tasks"),t.appendChild(c);for(let c=0;c<e.projectList.length;c++)for(let s=0;s<e.projectList[c].taskList.length;s++){if(!0===o.isTodayActive&&e.getTaskDueDate(c,s)!==r())continue;if(!0===o.isWeekActive&&!(e.getTaskDueDate(c,s)>=l()&&e.getTaskDueDate(c,s)<=u()))continue;const a=document.createElement("div"),m=document.createElement("div"),x=document.createElement("div"),h=document.createElement("p");h.textContent=e.getTaskTitle(c,s),h.classList.add("title");const T=document.createElement("p");T.classList.add("description"),T.textContent=e.getTaskDescription(c,s);const j=document.createElement("p");j.textContent=p(e.getTaskDueDate(c,s)),j.classList.add("due-date");const g=document.createElement("p");g.textContent=v(e.getTaskPriority(c,s)),g.classList.add("priority"),g.classList.add(e.getTaskPriority(c,s));const y=document.createElement("input");y.setAttribute("type","checkbox"),y.setAttribute("id","complete"),y.setAttribute("name","complete"),y.checked=e.getTaskComplete(c,s),y.addEventListener("click",(()=>{e.setActiveProjectIndex(c),e.setActiveTaskIndex(s);const t=!!y.checked;e.setTaskComplete(t,e.activeProjectIndex,e.activeTaskIndex),n.populateStorage(),e.setActiveProjectIndex(null),e.setActiveTaskIndex(null),d()})),e.getTaskComplete(c,s)&&(h.textContent=k(e.getTaskTitle(c,s)),T.textContent=k(e.getTaskDescription(c,s)));const I=document.createElement("button");I.textContent="✎",I.addEventListener("click",(()=>{e.setActiveProjectIndex(c),e.setActiveTaskIndex(s),i(),document.querySelector(".edit-task").showModal()}));const L=document.createElement("button");L.textContent="🗑️",L.addEventListener("click",(()=>{e.deleteTask(c,s),n.populateStorage(),d()})),t.appendChild(a),a.appendChild(m),a.appendChild(x),m.appendChild(h),m.appendChild(T),m.appendChild(j),m.appendChild(g),m.appendChild(y),x.appendChild(I),x.appendChild(L)}}function r(){const e=(new Date).getFullYear(),t=(new Date).getMonth()+1,c=(new Date).getDate();return c<10&&(c="0"+c),t<10&&(t="0"+t),e+"-"+t+"-"+c}function l(){var e=new Date,t=new Date(e.setDate(e.getDate()-e.getDay()+1));const c=t.getFullYear(),n=t.getMonth()+1,s=t.getDate();return s<10&&(s="0"+s),n<10&&(n="0"+n),c+"-"+n+"-"+s}function u(){var e=new Date,t=new Date(e.setDate(e.getDate()-e.getDay()+7));const c=t.getFullYear(),n=t.getMonth()+1,s=t.getDate();return s<10&&(s="0"+s),n<10&&(n="0"+n),c+"-"+n+"-"+s}function p(e){const t=e.slice(0,4);return e.slice(5,7)+"/"+e.slice(8,10)+"/"+t}function k(e){return e.split("").map((e=>e+"̶")).join("")}function v(e){return e.charAt(0).toUpperCase()+e.slice(1)}document.querySelectorAll(".default-project-list button").forEach((t=>t.addEventListener("click",(t=>{switch(a(),e.setActiveProjectIndex(null),e.setActiveTaskIndex(null),t.target.className){case"all":o.isAllActive=!0;break;case"today":o.isTodayActive=!0;break;case"week":o.isWeekActive=!0}d()})))),n.retrieveStorage(),s()})();